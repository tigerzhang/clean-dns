# CleanDNS Implementation Tasks

- [x] **Project Initialization**
    - [x] Create Rust project
    - [x] Define [Plugin](file:///Users/zhanghu/vpn/clean-dns/src/plugins/mod.rs#30-38) trait
    - [x] Implement [Sequence](file:///Users/zhanghu/vpn/clean-dns/src/plugins/sequence.rs#6-9) plugin
    - [x] Implement [Forward](file:///Users/zhanghu/vpn/clean-dns/src/plugins/forward.rs#10-13) plugin
    - [x] Basic Server implementation
    - [x] Verify with `dig`

- [ ] **Core Plugins Implementation**
    - [ ] **Matcher**: Implement simple domain/IP matching
    - [ ] **Cache**: Implement in-memory DNS cache
    - [ ] **Fallback**: Implement primary/secondary upstream logic
    - [ ] **Hosts**: Implement local hosts file support
    - [ ] **Query Matcher**: Match query type (A, AAAA, etc.)

- [ ] **Configuration & Loading**
    - [ ] Implement dynamic plugin loading from [config.yaml](file:///Users/zhanghu/vpn/clean-dns/config.yaml)
    - [ ] Support arguments for plugins (e.g., upstream addr, files)

- [ ] **Advanced Features (Optional)**
    - [ ] **IPSet/DomainSet**: Optimized matching
    - [ ] **ECS**: EDNS Client Subnet support
